<!-- 用户中心-主界面 -->
<script src="usercenter.component.ts"></script>
<nz-layout class="usercenter-layout">

  <!-- 用户中心-头部 -->
  <nz-header class="usercenter-header">
    <!-- 用户中心-头部__标志 -->
    <div class="usercenter-header__brand">
      <div class="header__brand-icon">
        <fa name="paper-plane" size="lg"></fa>
      </div>
      <div class="header__brand-title__container">
        <span class="header__brand-title__font">NF4 园丁助手</span>
      </div>
    </div>

    <!-- 用户中心—头部__搜索栏 -->
    <nz-input-group class="usercenter-header__search" nzSuffixIcon="anticon anticon-search">
      <input class="header__search-input" type="text" nz-input placeholder="搜索">
    </nz-input-group>
  </nz-header>

  <!-- 用户中心-界面容器 -->
  <nz-layout class="usercenter-container">

    <!-- 用户中心-侧边栏 -->

    <nz-sider class="usercenter-sider" nzCollapsible [(nzCollapsed)]="isCollapsed" [nzCollapsedWidth]="0"
              [nzBreakpoint]="'md'"
              [nzTrigger]='null'>
      <!-- 用户中心-侧边栏__用户信息 -->
      <div class="usercenter-sider__userinfo">
        <!-- 侧边栏__用户信息-头像 -->
        <div class="userinfo-avatar">
          <img class="userinfo-avatar__img" src={{user.avator}} alt="User"/>
        </div>
        <div class="userinfo-content">
          <div class="userinfo-name-container">
            <span class="userinfo-name">{{user.username}}</span>
          </div>
        </div>
      </div>

      <!-- 用户中心侧边栏__菜单 -->
      <ul class="usercenter-sider__menu" nz-menu [nzMode]="isCollapsed?'vertical':'inline'">

        <!-- 菜单项 -->
        <li nz-menu-item>
          <!-- 文件 -->
          <span>
            <i class="anticon anticon-home"></i>
            <span class="nav-text">个人中心</span>
          </span>
        </li>

        <!-- 菜单项 -->
        <li nz-menu-item>
          <!-- 试题检测 -->
          <span>
            <i class="anticon anticon-profile"></i>
            <span class="nav-text">试题检测</span>
          </span>
        </li>

        <!-- 菜单项 -->
        <li nz-menu-item>
          <!-- 注销用户 -->
          <span>
              <a class="sider__menu-link" href="toHomePage" >
                <i class="anticon anticon-logout"></i>
                <span class="nav-text">注销</span>
              </a>
            </span>
        </li>

      </ul>

    </nz-sider>

    <!-- 用户中心-内容 -->
    <nz-content class="usercenter-content">
      <!-- 控制面板 -->
      <div class="usercenter-controlPanel">

        <!-- 控制面板-导航栏 -->
        <div class="controlPanel-navigate">
          <button class="controlPanel-button usercenter-sider__trigger-button" (click)="triggerToggle()" nz-button
                  nzType="default" nz-tooltip nzTitle="切换侧边栏">
            <i class="anticon anticon-bars"></i>
          </button>
          <button (click)="getFolder(folder.parent)" class="controlPanel-button" nz-button nzType="default"
                  nz-tooltip nzTitle="上一级文件夹">
            <i class="anticon anticon-rollback"></i>上一级
          </button>
          <button (click)="getFolder(user.folderId)" class="controlPanel-button" nz-button nzType="default"
                  nz-tooltip nzTitle="主目录">
            <i class="anticon anticon-folder" (click)="getFolder(user.folderId)"></i>主目录
          </button>
        </div>
      </div>

      <!-- 控制面板-按钮组 -->
      <div class="controlPanel__button-group">
        <button (click)="addNewSlide()" class="controlPanel-button" nz-button nzType="default"
                nz-tooltip nzTitle="创建幻灯片">
          <i class="anticon anticon-file-add"></i>
          <span class="controlPanel-button__font">创建幻灯片</span>
        </button>

        <button (click)="addNewFolder()" class="controlPanel-button" nz-button nzType="default"
                nz-tooltip nzTitle="新建文件夹">
          <i class="anticon anticon-folder-add"></i>
          <span class="controlPanel-button__font">新建文件夹</span>
        </button>

        <a href="toUploadPage" class="controlPanel-button" nz-button nzType="default"
           nz-tooltip nzTitle="导入幻灯片">
          <i class="anticon anticon-upload"></i>
          <span class="controlPanel-button__font">导入幻灯片</span>
        </a>
      </div>

      <!-- 用户中心-工作区 -->
      <div class="usercenter-workspace" #scrollContainer>
        <!-- 用户中心-工作区-显示区域 -->
        <div class="workspace-display" nz-row [nzGutter]="{ xs: 8, sm: 8, md: 8, lg: 8, xl: 8, xxl: 8 }">

          <!--显示区域-卡片__文件夹-->
          <div *ngFor="let child of folder.child" class="usercenter-card" nz-col nzXs="24" nzSm="12" nzMd="8" nzLg="6"
               nzXl="6">
            <nz-card [nzCover]="coverFolder" [nzActions]="[actionOpen,actionRename,actionMove]" [nzType]="'inner'"
                     [nzHoverable]="'true'" (contextmenu)="contextMenu($event,folderDropDown)">
              <nz-card-meta nzTitle={{child.folderName}}></nz-card-meta>
            </nz-card>
            <!-- 幻灯片封面 -->
            <ng-template #coverFolder>
              <img alt="Folder" src="../assets/img/icon/folder_icon.png"/>
            </ng-template>
            <!-- 动作-打开 -->
            <ng-template #actionOpen>
              <div nz-tooltip nzTitle="打开文件夹" (click)="getFolder(child.folderId)">
                <i class="anticon anticon-folder-open"></i>
              </div>
            </ng-template>
            <!-- 动作-重命名 -->
            <ng-template #actionRename>
              <div nz-tooltip nzTitle="重命名">
                <i class="anticon anticon-edit"></i>
              </div>
            </ng-template>
            <!-- 动作-移动文件 -->
            <ng-template #actionMove>
              <div nz-tooltip nzTitle="移动到">
                <i class="anticon anticon-arrow-right"></i>
              </div>
            </ng-template>
            <ng-template #folderDropDown>
              <ul nz-menu nzInDropDown (nzClick)="close($event)">
                <li (click)="folderMenuDelete(child.folderId)" nz-menu-item>删除文件夹</li>
              </ul>
            </ng-template>
          </div>

          <!-- 显示区域-卡片__幻灯片 -->
          <div *ngFor="let child of folder.slideVos" class="usercenter-card" nz-col nzXs="24" nzSm="12" nzMd="8"
               nzLg="6" nzXl="6">
            <nz-card [nzCover]="coverSlide" [nzActions]="[actionSpeech,actionEdit,actionRename,actionMove]"
                     [nzType]="'inner'" [nzHoverable]="'true'" (contextmenu)="contextMenu($event,slideDropDown)">
              <nz-card-meta nzTitle={{child.name}}></nz-card-meta>
            </nz-card>
            <!-- 幻灯片封面 -->
            <ng-template #coverSlide>
              <img alt="Slide" src="../assets/img/icon/ppt_icon.png"/>
            </ng-template>
            <!-- 动作-演讲 -->
            <ng-template #actionSpeech>
              <div nz-tooltip nzTitle="演讲">
                <i class="anticon anticon-video-camera"></i>
              </div>
            </ng-template>
            <!-- 动作-编辑 -->
            <ng-template #actionEdit>
              <div nz-tooltip nzTitle="编辑" (click)="editSlide(child.slideId)">
                <i class="anticon anticon-file-ppt"></i>
              </div>
            </ng-template>
            <!-- 动作-重名名 -->
            <ng-template #actionRename>
              <div nz-tooltip nzTitle="重命名">
                <i class="anticon anticon-edit"></i>
              </div>
            </ng-template>
            <!-- 动作-移动到 -->
            <ng-template #actionMove>
              <div nz-tooltip nzTitle="移动到">
                <i class="anticon anticon-arrow-right"></i>
              </div>
            </ng-template>
            <ng-template #slideDropDown>
              <ul nz-menu nzInDropDown (nzClick)="close($event)">
                <li nz-menu-item (click)="slideMenuPlay(child.slideId)">播放幻灯片</li>
                <li nz-menu-item (click)="slideMenuDelete(child.slideId)">删除幻灯片</li>
              </ul>
            </ng-template>
          </div>

          <!-- 用户显示区域-结束 -->
        </div>

        <!-- 回到顶部按钮 -->
        <nz-back-top [nzTarget]="scrollContainer"></nz-back-top>

      </div>
    </nz-content>

  </nz-layout>

</nz-layout>
